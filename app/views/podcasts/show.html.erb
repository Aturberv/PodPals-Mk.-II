<h1><%= @podcast.title %></h1>

<% if @podcast.discussions %>
  <h2><%= @podcast.title %>'s Discussions</h2>
  <% @podcast.discussions.each do |discussion| %>
    <li>
    <%= link_to discussion.title, discussion %>
    </li>
  <% end %>
<% end %>

<% if user_signed_in? %>
  <%= render :partial => 'podcasts/share' %>
  <%= form_for([@podcast, @discussion]) do |f| %>
    <%= f.text_field :title %>
    <%= f.text_area :content, size: "60x12" %>
    <%= f.hidden_field(:podcast_id, value: @podcast.id)%>
    <%= f.submit "Create Discussion" %>
  <% end %>

  <form action="/podcasts/<%= @podcast.id %>/shares" method="post">
    <input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
    <select>
      <option value="" disabled selected>Choose a friend</option>
      <% current_user.friends.each do |friend| %>
        <option><%= friend.username %><input type="hidden" name="share[recipient_id]" value="<%= friend.id %>"></option>
      <% end %>
      <% current_user.inverse_friends.each do |friend| %>
        <option><%= friend.username %><input type="hidden" name="share[recipient_id]" value="<%= friend.id %>"></option>
      <% end %>
    </select>
    <input type="submit" value="Share Podcast">
  </form>
<% end %>
